apiVersion: v1
kind: ConfigMap
metadata:
  name: perses-dashboards
  namespace: mdai
  labels:
    "perses.dev/resource": "true"
data:
  mdai-cluster.json: |-
    {
      "kind": "Dashboard",
      "metadata": {
        "name": "bedojhupyve9sf",
        "createdAt": "2025-07-11T16:42:00.089380674Z",
        "updatedAt": "2025-07-11T16:47:35.24324801Z",
        "version": 1,
        "project": "mdai"
      },
      "spec": {
        "display": {
          "name": "MDAI Cluster Usage"
        },
        "panels": {
          "0_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Namespace(s) usage on total cluster CPU in %"
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last-number",
                  "format": {
                    "decimalPlaces": 2,
                    "unit": "percent-decimal"
                  },
                  "max": 1,
                  "thresholds": {
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 50
                      },
                      {
                        "color": "red",
                        "value": 70
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}[$__rate_interval])) / sum(machine_cpu_cores{cluster=\"$cluster\"})",
                        "seriesNameFormat": ""
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Namespace(s) usage on total cluster RAM in %"
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last-number",
                  "format": {
                    "decimalPlaces": 2,
                    "unit": "percent-decimal"
                  },
                  "max": 1,
                  "thresholds": {
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 50
                      },
                      {
                        "color": "red",
                        "value": 70
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}) / sum(machine_memory_bytes{cluster=\"$cluster\"})",
                        "seriesNameFormat": ""
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Kubernetes Resource Count"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "min",
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Running Pods"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_service_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Services"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_ingress_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Ingresses"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_deployment_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Deployments"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_statefulset_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Statefulsets"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_daemonset_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Daemonsets"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_persistentvolumeclaim_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Persistent Volume Claims"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_hpa_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Horizontal Pod Autoscalers"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_configmap_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Configmaps"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_secret_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Secrets"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_networkpolicy_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Network Policies"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_3": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Namespace(s) CPU Usage in cores"
              },
              "plugin": {
                "kind": "StatChart",
                "spec": {
                  "calculation": "last-number",
                  "format": {
                    "unit": "decimal"
                  },
                  "metricLabel": "",
                  "thresholds": {
                    "steps": [
                      {
                        "color": "rgb(255, 255, 255)",
                        "value": 0
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}[$__rate_interval]))",
                        "seriesNameFormat": "Real"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(kube_pod_container_resource_requests{namespace=~\"$namespace\", resource=\"cpu\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Requests"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(kube_pod_container_resource_limits{namespace=~\"$namespace\", resource=\"cpu\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Limits"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(machine_cpu_cores{cluster=\"$cluster\"})",
                        "seriesNameFormat": "Cluster Total"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_4": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Namespace(s) RAM Usage in bytes"
              },
              "plugin": {
                "kind": "StatChart",
                "spec": {
                  "calculation": "last-number",
                  "format": {
                    "unit": "bytes"
                  },
                  "metricLabel": "",
                  "thresholds": {
                    "steps": [
                      {
                        "color": "rgb(255, 255, 255)",
                        "value": 0
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Real"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(kube_pod_container_resource_requests{namespace=~\"$namespace\", resource=\"memory\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Requests"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(kube_pod_container_resource_limits{namespace=~\"$namespace\", resource=\"memory\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Limits"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(machine_memory_bytes{cluster=\"$cluster\"})",
                        "seriesNameFormat": "Cluster Total"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "CPU usage by Pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "{{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Memory usage by Pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (pod)",
                        "seriesNameFormat": "{{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Kubernetes Pods QoS classes"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "min",
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_status_qos_class{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (qos_class)",
                        "seriesNameFormat": "{{ qos_class }} pods"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Total pods"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Kubernetes Pods Status Reason"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "min",
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_status_reason{cluster=\"$cluster\"}) by (reason)",
                        "seriesNameFormat": "{{ reason }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "OOM Events by namespace, pod",
                "description": "No data is generally a good thing here."
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "min",
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(increase(container_oom_events_total{namespace=~\"${namespace}\", cluster=\"$cluster\"}[$__rate_interval])) by (namespace, pod) > 0",
                        "seriesNameFormat": "namespace: {{ namespace }} - pod: {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_3": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Container Restarts by namespace, pod",
                "description": "No data is generally a good thing here."
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "sum"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "sum by(namespace, pod) (increase(kube_pod_container_status_restarts_total[$__rate_interval]))",
                        "seriesNameFormat": "namespace: {{ namespace }} - pod: {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_4": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Nb of pods by state"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "decimalPlaces": 0,
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_status_ready{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Ready"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_status_running{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Running"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_status_waiting{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Waiting"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_status_restarts_total{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Restarts Total"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_status_terminated{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                        "seriesNameFormat": "Terminated"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_5": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Nb of containers by pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "decimalPlaces": 0,
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_container_info{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (pod)",
                        "seriesNameFormat": "{{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_6": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Replicas available by deployment"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_deployment_status_replicas_available{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (deployment)",
                        "seriesNameFormat": "{{ deployment }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_7": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Replicas unavailable by deployment"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_deployment_status_replicas_unavailable{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (deployment)",
                        "seriesNameFormat": "{{ deployment }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_8": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Pods with unexpected status",
                "description": "List of pods that are not in Running or Succeeded status."
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kube_pod_status_phase{phase!~\"Running|Succeeded\", namespace=~\"$namespace\", cluster=\"$cluster\"}) by (pod) > 0",
                        "seriesNameFormat": "{{ deployment }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_9": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Container Image Used"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": [
                      "min",
                      "max",
                      "last"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "bar",
                    "lineWidth": 2,
                    "stack": "all"
                  },
                  "yAxis": {
                    "format": {
                      "unit": "decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "count(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (image)",
                        "seriesNameFormat": "{{ image }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "3_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Persistent Volumes - Capacity and usage in %"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "decimalPlaces": 2,
                      "unit": "percent-decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kubelet_volume_stats_used_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim) / sum(kubelet_volume_stats_capacity_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                        "seriesNameFormat": "{{ persistentvolumeclaim }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "3_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Persistent Volumes - Capacity and usage in bytes"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "decimalPlaces": 2,
                      "unit": "bytes"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kubelet_volume_stats_used_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                        "seriesNameFormat": "{{ persistentvolumeclaim }} - Used"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "sum(kubelet_volume_stats_capacity_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                        "seriesNameFormat": "{{ persistentvolumeclaim }} - Capacity"
                      }
                    }
                  }
                }
              ]
            }
          },
          "3_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Persistent Volumes - Inodes"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "decimalPlaces": 2,
                      "unit": "percent-decimal"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "",
                        "query": "1 - sum(kubelet_volume_stats_inodes_used{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim) / sum(kubelet_volume_stats_inodes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                        "seriesNameFormat": "{{ persistentvolumeclaim }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "4_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Network - Bandwidth by pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(rate(container_network_receive_bytes_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Received - {{ pod }}"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "- sum(rate(container_network_transmit_bytes_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Transmitted - {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "4_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Network - Packets Rate by pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(rate(container_network_receive_packets_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Received - {{ pod }}"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "- sum(rate(container_network_transmit_packets_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Transmitted - {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "4_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Network - Packets Dropped by pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(rate(container_network_receive_packets_dropped_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Received - {{ pod }}"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "- sum(rate(container_network_transmit_packets_dropped_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Transmitted - {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "4_3": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Network - Errors by pod"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.25,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 2
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "sum(rate(container_network_receive_errors_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Received - {{ pod }}"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "minStep": "$resolution",
                        "query": "- sum(rate(container_network_transmit_errors_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                        "seriesNameFormat": "Transmitted - {{ pod }}"
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "layouts": [
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Overview",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 6,
                  "height": 7,
                  "content": {
                    "$ref": "#/spec/panels/0_0"
                  }
                },
                {
                  "x": 6,
                  "y": 0,
                  "width": 6,
                  "height": 7,
                  "content": {
                    "$ref": "#/spec/panels/0_1"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 11,
                  "content": {
                    "$ref": "#/spec/panels/0_2"
                  }
                },
                {
                  "x": 0,
                  "y": 7,
                  "width": 6,
                  "height": 4,
                  "content": {
                    "$ref": "#/spec/panels/0_3"
                  }
                },
                {
                  "x": 6,
                  "y": 7,
                  "width": 6,
                  "height": 4,
                  "content": {
                    "$ref": "#/spec/panels/0_4"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Resources",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_1"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Kubernetes",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/2_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/2_1"
                  }
                },
                {
                  "x": 0,
                  "y": 9,
                  "width": 12,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/2_2"
                  }
                },
                {
                  "x": 12,
                  "y": 9,
                  "width": 12,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/2_3"
                  }
                },
                {
                  "x": 0,
                  "y": 18,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_4"
                  }
                },
                {
                  "x": 12,
                  "y": 18,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_5"
                  }
                },
                {
                  "x": 0,
                  "y": 26,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_6"
                  }
                },
                {
                  "x": 12,
                  "y": 26,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_7"
                  }
                },
                {
                  "x": 0,
                  "y": 34,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_8"
                  }
                },
                {
                  "x": 12,
                  "y": 34,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_9"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Kubernetes Storage",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/3_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/3_1"
                  }
                },
                {
                  "x": 0,
                  "y": 8,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/3_2"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Network",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/4_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/4_1"
                  }
                },
                {
                  "x": 0,
                  "y": 8,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/4_2"
                  }
                },
                {
                  "x": 12,
                  "y": 8,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/4_3"
                  }
                }
              ]
            }
          }
        ],
        "variables": [
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "allowAllValue": false,
              "allowMultiple": false,
              "plugin": {
                "kind": "DatasourceVariable",
                "spec": {
                  "datasourcePluginKind": "prometheus"
                }
              },
              "name": "datasource"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "alphabetical-asc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "cluster",
                  "matchers": [
                    "kube_node_info"
                  ]
                }
              },
              "name": "cluster"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "defaultValue": [
                "cert-manager"
              ],
              "allowAllValue": true,
              "allowMultiple": true,
              "customAllValue": ".*",
              "sort": "alphabetical-asc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "namespace",
                  "matchers": [
                    "kube_pod_info{cluster=\"$cluster\"}"
                  ]
                }
              },
              "name": "namespace"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "defaultValue": "30s",
              "allowAllValue": false,
              "allowMultiple": false,
              "plugin": {
                "kind": "StaticListVariable",
                "spec": {
                  "values": [
                    "1s",
                    "15s",
                    "30s",
                    "1m",
                    "3m",
                    "5m"
                  ]
                }
              },
              "name": "resolution"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "description": "Can be used to filter on a specific deployment, statefulset or deamonset (only relevant panels).",
                "hidden": false
              },
              "defaultValue": [
                "cert-manager-5fbb96f87c"
              ],
              "allowAllValue": true,
              "allowMultiple": true,
              "sort": "alphabetical-asc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "created_by_name",
                  "matchers": [
                    "kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"}"
                  ]
                }
              },
              "name": "created_by"
            }
          }
        ],
        "duration": "1h",
        "refreshInterval": "0s"
      }
    }
  mdai-controller-runtime-metrics.json: |-
    {
      "kind": "Dashboard",
      "metadata": {
        "name": "beg8ec1qy1fr4e",
        "createdAt": "2025-07-11T16:48:18.543290918Z",
        "updatedAt": "2025-07-11T16:48:18.543290918Z",
        "version": 0,
        "project": "mdai"
      },
      "spec": {
        "display": {
          "name": "MDAI Controller Runtime Metrics"
        },
        "panels": {
          "0_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Number of workers in use"
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last-number",
                  "thresholds": {
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 70
                      },
                      {
                        "color": "red",
                        "value": 85
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "controller_runtime_active_workers{job=\"$job\", namespace=\"$namespace\"}",
                        "seriesNameFormat": "{{controller}} {{instance}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Total Reconciliation Count Per Controller",
                "description": "Total number of reconciliations per controller"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.2,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 3
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "sum(rate(controller_runtime_reconcile_total{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, pod)",
                        "seriesNameFormat": "{{instance}} {{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Reconciliation Error Count Per Controller",
                "description": "Total number of reconciliation errors per controller"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.2,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 3
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "sum(rate(controller_runtime_reconcile_errors_total{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, pod)",
                        "seriesNameFormat": "{{instance}} {{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "WorkQueue Depth"
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last-number",
                  "thresholds": {
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 70
                      },
                      {
                        "color": "red",
                        "value": 85
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "workqueue_depth{job=\"$job\", namespace=\"$namespace\"}",
                        "seriesNameFormat": ""
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Seconds For Items Stay In Queue (before being requested) (P50, P90, P99)",
                "description": "How long in seconds an item stays in workqueue before being requested"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": [
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.1,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 1,
                    "stack": "all"
                  },
                  "yAxis": {
                    "format": {
                      "unit": "seconds"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.50, sum(rate(workqueue_queue_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P50 {{name}} {{instance}} "
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.90, sum(rate(workqueue_queue_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P90 {{name}} {{instance}} "
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.99, sum(rate(workqueue_queue_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P99 {{name}} {{instance}} "
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Work Queue Add Rate"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.2,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 3
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "sum(rate(workqueue_adds_total{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name)",
                        "seriesNameFormat": "{{name}} {{instance}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_3": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Unfinished Seconds",
                "description": "How many seconds of work has done that is in progress and hasn't been observed by work_duration.\nLarge values indicate stuck threads.\nOne can deduce the number of stuck threads by observing the rate at which this increases."
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last-number",
                  "format": {
                    "unit": "seconds"
                  },
                  "thresholds": {
                    "steps": [
                      {
                        "color": "green",
                        "value": 0
                      },
                      {
                        "color": "orange",
                        "value": 70
                      },
                      {
                        "color": "red",
                        "value": 85
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "rate(workqueue_unfinished_work_seconds{job=\"$job\", namespace=\"$namespace\"}[5m])",
                        "seriesNameFormat": ""
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_4": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Seconds Processing Items From WorkQueue (P50, P90, P99)",
                "description": "How long in seconds processing an item from workqueue takes."
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": [
                      "max",
                      "mean"
                    ]
                  },
                  "visual": {
                    "areaOpacity": 0.1,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 1
                  },
                  "yAxis": {
                    "format": {
                      "unit": "seconds"
                    }
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.50, sum(rate(workqueue_work_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P50 {{name}} {{instance}} "
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.90, sum(rate(workqueue_work_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P90 {{name}} {{instance}} "
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "histogram_quantile(0.99, sum(rate(workqueue_work_duration_seconds_bucket{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name, le))",
                        "seriesNameFormat": "P99 {{name}} {{instance}} "
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_5": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Work Queue Retries Rate",
                "description": "Total number of retries handled by workqueue"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "table",
                    "position": "bottom",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.2,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 3
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "minStep": "",
                        "query": "sum(rate(workqueue_retries_total{job=\"$job\", namespace=\"$namespace\"}[5m])) by (instance, name)",
                        "seriesNameFormat": "{{name}} {{instance}} "
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "layouts": [
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Reconciliation Metrics",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 3,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/0_0"
                  }
                },
                {
                  "x": 3,
                  "y": 0,
                  "width": 11,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/0_1"
                  }
                },
                {
                  "x": 14,
                  "y": 0,
                  "width": 10,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/0_2"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Work Queue Metrics",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 3,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_0"
                  }
                },
                {
                  "x": 3,
                  "y": 0,
                  "width": 11,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_1"
                  }
                },
                {
                  "x": 14,
                  "y": 0,
                  "width": 10,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_2"
                  }
                },
                {
                  "x": 0,
                  "y": 8,
                  "width": 3,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/1_3"
                  }
                },
                {
                  "x": 3,
                  "y": 8,
                  "width": 11,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/1_4"
                  }
                },
                {
                  "x": 14,
                  "y": 8,
                  "width": 10,
                  "height": 9,
                  "content": {
                    "$ref": "#/spec/panels/1_5"
                  }
                }
              ]
            }
          }
        ],
        "variables": [
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "none",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "job",
                  "matchers": [
                    "controller_runtime_reconcile_total{namespace=~\"$namespace\"}"
                  ]
                }
              },
              "name": "job"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "none",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "namespace",
                  "matchers": [
                    "controller_runtime_reconcile_total"
                  ]
                }
              },
              "name": "namespace"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "pod",
                "hidden": true
              },
              "allowAllValue": true,
              "allowMultiple": true,
              "sort": "none",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "pod",
                  "matchers": [
                    "controller_runtime_reconcile_total{namespace=~\"$namespace\", job=~\"$job\"}"
                  ]
                }
              },
              "name": "pod"
            }
          }
        ],
        "duration": "1h",
        "refreshInterval": "0s"
      }
    }
  mdai-data-management.json: |-
    {
      "kind": "Dashboard",
      "metadata": {
        "name": "de978rcegwfswb",
        "createdAt": "2025-07-10T23:23:46.604864046Z",
        "updatedAt": "2025-07-10T23:23:46.604864046Z",
        "version": 0,
        "project": "mdai"
      },
      "spec": {
        "display": {
          "name": "MDAI Data Management"
        },
        "panels": {
          "0_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "MDAI Total by $groupByLabel",
                "description": "Shows how many $groupByLabel monitored based on the current selected time interval."
              },
              "plugin": {
                "kind": "StatChart",
                "spec": {
                  "calculation": "last-number",
                  "metricLabel": "",
                  "thresholds": {
                    "defaultColor": "#9e57ae",
                    "steps": []
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "count(count by($groupByLabel) (rate($receiverMetric{data_type=\"$dataType\"}[$__rate_interval])))"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "MDAI I/O $dataType",
                "description": "Total ingress and egress $dataType filtered through MDAI operator."
              },
              "plugin": {
                "kind": "BarChart",
                "spec": {
                  "calculation": "last",
                  "format": {
                    "unit": "bytes"
                  },
                  "mode": "value",
                  "sort": "desc"
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                        "seriesNameFormat": "Received by Bytes"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "query": "sum(sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                        "seriesNameFormat": "Sent by Bytes"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Average Percentage Difference I/O",
                "description": "Average percentage difference between ingress and egress $dataType."
              },
              "plugin": {
                "kind": "GaugeChart",
                "spec": {
                  "calculation": "last",
                  "format": {
                    "unit": "percent"
                  },
                  "max": 100,
                  "thresholds": {
                    "steps": [
                      {
                        "color": "#6d3b78",
                        "value": 0
                      },
                      {
                        "color": "#eabef3",
                        "value": 0
                      },
                      {
                        "color": "#e288f6",
                        "value": 10
                      },
                      {
                        "color": "#be5ad4",
                        "value": 20
                      },
                      {
                        "color": "#9e4db0",
                        "value": 30
                      },
                      {
                        "color": "#8d33a0",
                        "value": 40
                      },
                      {
                        "color": "#6d3b78",
                        "value": 50
                      },
                      {
                        "color": "#61306b",
                        "value": 60
                      },
                      {
                        "color": "#572961",
                        "value": 70
                      },
                      {
                        "color": "#481254",
                        "value": 80
                      },
                      {
                        "color": "#2f0837",
                        "value": 90
                      }
                    ]
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "(\n  sum(increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n  -\n  sum(increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n)\n/\nsum(increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n* 100",
                        "seriesNameFormat": "Difference I/O"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "MDAI I/O by $groupByLabel",
                "description": "Total number of $dataType and size per service based on time interval for ingress and egress."
              },
              "plugin": {
                "kind": "Table",
                "spec": {
                  "cellSettings": [],
                  "columnSettings": [
                    {
                      "header": "Services",
                      "hide": false,
                      "name": "service",
                      "enableSorting": true,
                      "sort": "desc"
                    },
                    {
                      "name": "timestamp",
                      "hide": true,
                      "header": "timestamp"
                    },
                    {
                      "name": "value #1",
                      "header": "Received"
                    },
                    {
                      "name": "value #2",
                      "header": "Receiver Bytes",
                      "format": {
                        "unit": "bytes"
                      }
                    },
                    {
                      "name": "value #3",
                      "header": "Sent"
                    },
                    {
                      "name": "value #4",
                      "header": "Sent Bytes",
                      "format": {
                        "unit": "bytes"
                      }
                    }
                  ],
                  "density": "standard",
                  "pagination": true,
                  "transforms": [
                    {
                      "kind": "MergeSeries",
                      "spec": {}
                    }
                  ]
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "label_replace(\n  sum by ($groupByLabel) (increase($receiverMetric{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",          \n  \"$groupByLabel\",\n  \"(.*)\"\n)",
                        "seriesNameFormat": ""
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "label_replace(\n  sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "label_replace(\n  sum by($groupByLabel) (increase($exporterMetric{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                      }
                    }
                  }
                },
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "label_replace(\n  sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                      }
                    }
                  }
                }
              ],
              "links": []
            }
          },
          "1_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Top Talkers Recieved $dataType Totals",
                "description": "Total number of $dataType from top talkers $groupByLabel ingested by MDAI"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "list",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.2,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 1.5,
                    "pointRadius": 3
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  },
                  "querySettings": []
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "topk(2, sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                        "seriesNameFormat": "{{$groupByLabel}}"
                      }
                    }
                  }
                }
              ],
              "links": []
            }
          },
          "1_2": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Top Talkers Sent $dataType Totals",
                "description": "Total number of $dataType from top talkers $groupByLabel sent to configured destinations"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "legend": {
                    "mode": "list",
                    "position": "right",
                    "values": []
                  },
                  "visual": {
                    "areaOpacity": 0.18,
                    "connectNulls": false,
                    "display": "line",
                    "lineWidth": 1
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "prometheus"
                        },
                        "query": "sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n  and on($groupByLabel)\ntopk(2, sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                        "seriesNameFormat": "{{$groupByLabel}}"
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "layouts": [
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Totals for I/O $dataType",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 10,
                  "content": {
                    "$ref": "#/spec/panels/0_1"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 8,
                  "height": 10,
                  "content": {
                    "$ref": "#/spec/panels/0_2"
                  }
                },
                {
                  "x": 20,
                  "y": 0,
                  "width": 4,
                  "height": 10,
                  "content": {
                    "$ref": "#/spec/panels/0_0"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "$dataType",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 24,
                  "height": 11,
                  "content": {
                    "$ref": "#/spec/panels/1_0"
                  }
                },
                {
                  "x": 0,
                  "y": 11,
                  "width": 12,
                  "height": 16,
                  "content": {
                    "$ref": "#/spec/panels/1_1"
                  }
                },
                {
                  "x": 12,
                  "y": 11,
                  "width": 12,
                  "height": 16,
                  "content": {
                    "$ref": "#/spec/panels/1_2"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Active Filters",
                "collapse": {
                  "open": true
                }
              },
              "items": []
            }
          }
        ],
        "variables": [
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "Receiver Metric",
                "hidden": false
              },
              "defaultValue": "items_received_by_service_total",
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "alphabetical-asc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "__name__",
                  "matchers": [
                    "{__name__=~\".+\", data_type!=\"\"}"
                  ]
                }
              },
              "name": "receiverMetric"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "Receiver Metric by Bytes",
                "hidden": false
              },
              "defaultValue": "bytes_received_by_service_total",
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "alphabetical-asc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "__name__",
                  "matchers": [
                    "{__name__=~\".+\", data_type!=\"\"}"
                  ]
                }
              },
              "name": "receiverMetricByBytes"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "Exporter Metric",
                "hidden": false
              },
              "defaultValue": "items_sent_by_service_total",
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "alphabetical-desc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "__name__",
                  "matchers": [
                    "{__name__=~\".+\", data_type!=\"\"}"
                  ]
                }
              },
              "name": "exporterMetric"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "Exporter Metric by Bytes",
                "hidden": false
              },
              "defaultValue": "bytes_sent_by_service_total",
              "allowAllValue": false,
              "allowMultiple": false,
              "sort": "alphabetical-desc",
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "__name__",
                  "matchers": [
                    "{__name__=~\".+\", data_type!=\"\"}"
                  ]
                }
              },
              "name": "exporterMetricByBytes"
            }
          },
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "name": "Data Type",
                "hidden": false
              },
              "defaultValue": "logs",
              "allowAllValue": false,
              "allowMultiple": false,
              "plugin": {
                "kind": "StaticListVariable",
                "spec": {
                  "values": [
                    "logs",
                    "metrics",
                    "traces"
                  ]
                }
              },
              "name": "dataType"
            }
          },
          {
            "kind": "TextVariable",
            "spec": {
              "display": {
                "name": "Group By Label",
                "hidden": false
              },
              "value": "mdai_service",
              "name": "groupByLabel"
            }
          }
        ],
        "duration": "30m",
        "refreshInterval": "0s",
        "datasources": {}
      }
    }
  mdai-use.json: |-
    {
      "kind": "Dashboard",
      "metadata": {
        "name": "mdai-use-dashboard-demo",
        "createdAt": "2025-07-11T17:30:01.038766257Z",
        "updatedAt": "2025-07-11T17:30:01.038766257Z",
        "version": 0,
        "project": "mdai"
      },
      "spec": {
        "display": {
          "name": "MDAI USE dashboard"
        },
        "panels": {
          "0_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "CPU Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "percent-decimal"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"gateway-collector.*\", container=\"otc-container\"}[$__rate_interval])\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "0_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Memory Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"gateway-collector.*\", container=\"otc-container\"}\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "CPU Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "percent-decimal"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"mdai-operator-controller-manager.*\", container=\"manager\"}[$__rate_interval])\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "1_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Memory Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"mdai-operator-controller-manager.*\", container=\"manager\"}\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "CPU Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "percent-decimal"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"opentelemetry-operator.*\", container=\"manager\"}[$__rate_interval])\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "2_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Memory Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"opentelemetry-operator.*\", container=\"manager\"}\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "3_0": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "CPU Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "percent-decimal"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"prometheus-mdai-kube-prometheus-stack-prometheus.*\", container=\"prometheus\"}[$__rate_interval])\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          },
          "3_1": {
            "kind": "Panel",
            "spec": {
              "display": {
                "name": "Memory Usage"
              },
              "plugin": {
                "kind": "TimeSeriesChart",
                "spec": {
                  "visual": {
                    "areaOpacity": 0,
                    "lineWidth": 2
                  },
                  "yAxis": {
                    "format": {
                      "unit": "bytes"
                    },
                    "min": 0
                  }
                }
              },
              "queries": [
                {
                  "kind": "TimeSeriesQuery",
                  "spec": {
                    "plugin": {
                      "kind": "PrometheusTimeSeriesQuery",
                      "spec": {
                        "datasource": {
                          "kind": "PrometheusDatasource",
                          "name": "Prometheus"
                        },
                        "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"prometheus-mdai-kube-prometheus-stack-prometheus.*\", container=\"prometheus\"}\n",
                        "seriesNameFormat": "{{pod}}"
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "layouts": [
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Collector",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/0_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/0_1"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "MDAI Operator",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/1_1"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Otel Operator",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/2_1"
                  }
                }
              ]
            }
          },
          {
            "kind": "Grid",
            "spec": {
              "display": {
                "title": "Prometheus",
                "collapse": {
                  "open": true
                }
              },
              "items": [
                {
                  "x": 0,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/3_0"
                  }
                },
                {
                  "x": 12,
                  "y": 0,
                  "width": 12,
                  "height": 8,
                  "content": {
                    "$ref": "#/spec/panels/3_1"
                  }
                }
              ]
            }
          }
        ],
        "variables": [
          {
            "kind": "ListVariable",
            "spec": {
              "display": {
                "hidden": false
              },
              "defaultValue": "mdai",
              "allowAllValue": false,
              "allowMultiple": false,
              "plugin": {
                "kind": "PrometheusLabelValuesVariable",
                "spec": {
                  "labelName": "namespace",
                  "matchers": []
                }
              },
              "name": "namespace"
            }
          }
        ],
        "duration": "1h",
        "refreshInterval": "0s"
      }
    }
  perses-dashboards-configmap.yaml: |
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: perses-dashboards
      namespace: mdai
      labels:
        "perses.dev/resource": "true"
    data:
      mdai-cluster.json: |-
        {
          "kind": "Dashboard",
          "metadata": {
            "name": "bedojhupyve9sf",
            "createdAt": "2025-07-11T16:42:00.089380674Z",
            "updatedAt": "2025-07-11T16:47:35.24324801Z",
            "version": 1,
            "project": "mdai"
          },
          "spec": {
            "display": {
              "name": "MDAI Cluster Usage"
            },
            "panels": {
              "0_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Namespace(s) usage on total cluster CPU in %"
                  },
                  "plugin": {
                    "kind": "GaugeChart",
                    "spec": {
                      "calculation": "last-number",
                      "format": {
                        "decimalPlaces": 2,
                        "unit": "percent-decimal"
                      },
                      "max": 1,
                      "thresholds": {
                        "steps": [
                          {
                            "color": "green",
                            "value": 0
                          },
                          {
                            "color": "orange",
                            "value": 50
                          },
                          {
                            "color": "red",
                            "value": 70
                          }
                        ]
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}[$__rate_interval])) / sum(machine_cpu_cores{cluster=\"$cluster\"})",
                            "seriesNameFormat": ""
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Namespace(s) usage on total cluster RAM in %"
                  },
                  "plugin": {
                    "kind": "GaugeChart",
                    "spec": {
                      "calculation": "last-number",
                      "format": {
                        "decimalPlaces": 2,
                        "unit": "percent-decimal"
                      },
                      "max": 1,
                      "thresholds": {
                        "steps": [
                          {
                            "color": "green",
                            "value": 0
                          },
                          {
                            "color": "orange",
                            "value": 50
                          },
                          {
                            "color": "red",
                            "value": 70
                          }
                        ]
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}) / sum(machine_memory_bytes{cluster=\"$cluster\"})",
                            "seriesNameFormat": ""
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Kubernetes Resource Count"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "min",
                          "max",
                          "mean"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Running Pods"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_service_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Services"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_ingress_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Ingresses"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_deployment_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Deployments"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_statefulset_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Statefulsets"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_daemonset_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Daemonsets"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_persistentvolumeclaim_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Persistent Volume Claims"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_hpa_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Horizontal Pod Autoscalers"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_configmap_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Configmaps"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_secret_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Secrets"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_networkpolicy_labels{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Network Policies"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_3": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Namespace(s) CPU Usage in cores"
                  },
                  "plugin": {
                    "kind": "StatChart",
                    "spec": {
                      "calculation": "last-number",
                      "format": {
                        "unit": "decimal"
                      },
                      "metricLabel": "",
                      "thresholds": {
                        "steps": [
                          {
                            "color": "rgb(255, 255, 255)",
                            "value": 0
                          }
                        ]
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"}[$__rate_interval]))",
                            "seriesNameFormat": "Real"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(kube_pod_container_resource_requests{namespace=~\"$namespace\", resource=\"cpu\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Requests"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(kube_pod_container_resource_limits{namespace=~\"$namespace\", resource=\"cpu\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Limits"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(machine_cpu_cores{cluster=\"$cluster\"})",
                            "seriesNameFormat": "Cluster Total"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_4": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Namespace(s) RAM Usage in bytes"
                  },
                  "plugin": {
                    "kind": "StatChart",
                    "spec": {
                      "calculation": "last-number",
                      "format": {
                        "unit": "bytes"
                      },
                      "metricLabel": "",
                      "thresholds": {
                        "steps": [
                          {
                            "color": "rgb(255, 255, 255)",
                            "value": 0
                          }
                        ]
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Real"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(kube_pod_container_resource_requests{namespace=~\"$namespace\", resource=\"memory\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Requests"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(kube_pod_container_resource_limits{namespace=~\"$namespace\", resource=\"memory\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Limits"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(machine_memory_bytes{cluster=\"$cluster\"})",
                            "seriesNameFormat": "Cluster Total"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "1_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "CPU usage by Pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "{{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "1_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Memory usage by Pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(container_memory_working_set_bytes{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (pod)",
                            "seriesNameFormat": "{{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Kubernetes Pods QoS classes"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "min",
                          "max",
                          "mean"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_status_qos_class{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (qos_class)",
                            "seriesNameFormat": "{{ qos_class }} pods"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Total pods"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Kubernetes Pods Status Reason"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "min",
                          "max",
                          "mean"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_status_reason{cluster=\"$cluster\"}) by (reason)",
                            "seriesNameFormat": "{{ reason }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "OOM Events by namespace, pod",
                    "description": "No data is generally a good thing here."
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "min",
                          "max",
                          "mean"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(increase(container_oom_events_total{namespace=~\"${namespace}\", cluster=\"$cluster\"}[$__rate_interval])) by (namespace, pod) > 0",
                            "seriesNameFormat": "namespace: {{ namespace }} - pod: {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_3": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Container Restarts by namespace, pod",
                    "description": "No data is generally a good thing here."
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "sum"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "minStep": "",
                            "query": "sum by(namespace, pod) (increase(kube_pod_container_status_restarts_total[$__rate_interval]))",
                            "seriesNameFormat": "namespace: {{ namespace }} - pod: {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_4": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Nb of pods by state"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "decimalPlaces": 0,
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_status_ready{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Ready"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_status_running{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Running"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_status_waiting{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Waiting"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_status_restarts_total{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Restarts Total"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_status_terminated{namespace=~\"$namespace\", cluster=\"$cluster\"})",
                            "seriesNameFormat": "Terminated"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_5": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Nb of containers by pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "decimalPlaces": 0,
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_container_info{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (pod)",
                            "seriesNameFormat": "{{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_6": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Replicas available by deployment"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_deployment_status_replicas_available{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (deployment)",
                            "seriesNameFormat": "{{ deployment }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_7": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Replicas unavailable by deployment"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_deployment_status_replicas_unavailable{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}) by (deployment)",
                            "seriesNameFormat": "{{ deployment }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_8": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Pods with unexpected status",
                    "description": "List of pods that are not in Running or Succeeded status."
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kube_pod_status_phase{phase!~\"Running|Succeeded\", namespace=~\"$namespace\", cluster=\"$cluster\"}) by (pod) > 0",
                            "seriesNameFormat": "{{ deployment }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_9": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Container Image Used"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": [
                          "min",
                          "max",
                          "last"
                        ]
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "bar",
                        "lineWidth": 2,
                        "stack": "all"
                      },
                      "yAxis": {
                        "format": {
                          "unit": "decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "count(rate(container_cpu_usage_seconds_total{namespace=~\"$namespace\", image!=\"\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (image)",
                            "seriesNameFormat": "{{ image }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "3_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Persistent Volumes - Capacity and usage in %"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "decimalPlaces": 2,
                          "unit": "percent-decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kubelet_volume_stats_used_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim) / sum(kubelet_volume_stats_capacity_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                            "seriesNameFormat": "{{ persistentvolumeclaim }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "3_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Persistent Volumes - Capacity and usage in bytes"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "decimalPlaces": 2,
                          "unit": "bytes"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kubelet_volume_stats_used_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                            "seriesNameFormat": "{{ persistentvolumeclaim }} - Used"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "sum(kubelet_volume_stats_capacity_bytes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                            "seriesNameFormat": "{{ persistentvolumeclaim }} - Capacity"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "3_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Persistent Volumes - Inodes"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "decimalPlaces": 2,
                          "unit": "percent-decimal"
                        }
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "",
                            "query": "1 - sum(kubelet_volume_stats_inodes_used{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim) / sum(kubelet_volume_stats_inodes{namespace=~\"$namespace\", cluster=\"$cluster\"}) by (persistentvolumeclaim)",
                            "seriesNameFormat": "{{ persistentvolumeclaim }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "4_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Network - Bandwidth by pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(rate(container_network_receive_bytes_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Received - {{ pod }}"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "- sum(rate(container_network_transmit_bytes_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Transmitted - {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "4_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Network - Packets Rate by pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(rate(container_network_receive_packets_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Received - {{ pod }}"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "- sum(rate(container_network_transmit_packets_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Transmitted - {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "4_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Network - Packets Dropped by pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(rate(container_network_receive_packets_dropped_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Received - {{ pod }}"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "- sum(rate(container_network_transmit_packets_dropped_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Transmitted - {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "4_3": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Network - Errors by pod"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "table",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.25,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 2
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "sum(rate(container_network_receive_errors_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Received - {{ pod }}"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "minStep": "$resolution",
                            "query": "- sum(rate(container_network_transmit_errors_total{namespace=~\"$namespace\", pod=~\"${created_by}.*\", cluster=\"$cluster\"}[$__rate_interval])) by (pod)",
                            "seriesNameFormat": "Transmitted - {{ pod }}"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            },
            "layouts": [
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Overview",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 6,
                      "height": 7,
                      "content": {
                        "$ref": "#/spec/panels/0_0"
                      }
                    },
                    {
                      "x": 6,
                      "y": 0,
                      "width": 6,
                      "height": 7,
                      "content": {
                        "$ref": "#/spec/panels/0_1"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 11,
                      "content": {
                        "$ref": "#/spec/panels/0_2"
                      }
                    },
                    {
                      "x": 0,
                      "y": 7,
                      "width": 6,
                      "height": 4,
                      "content": {
                        "$ref": "#/spec/panels/0_3"
                      }
                    },
                    {
                      "x": 6,
                      "y": 7,
                      "width": 6,
                      "height": 4,
                      "content": {
                        "$ref": "#/spec/panels/0_4"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Resources",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/1_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/1_1"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Kubernetes",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 9,
                      "content": {
                        "$ref": "#/spec/panels/2_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 9,
                      "content": {
                        "$ref": "#/spec/panels/2_1"
                      }
                    },
                    {
                      "x": 0,
                      "y": 9,
                      "width": 12,
                      "height": 9,
                      "content": {
                        "$ref": "#/spec/panels/2_2"
                      }
                    },
                    {
                      "x": 12,
                      "y": 9,
                      "width": 12,
                      "height": 9,
                      "content": {
                        "$ref": "#/spec/panels/2_3"
                      }
                    },
                    {
                      "x": 0,
                      "y": 18,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_4"
                      }
                    },
                    {
                      "x": 12,
                      "y": 18,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_5"
                      }
                    },
                    {
                      "x": 0,
                      "y": 26,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_6"
                      }
                    },
                    {
                      "x": 12,
                      "y": 26,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_7"
                      }
                    },
                    {
                      "x": 0,
                      "y": 34,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_8"
                      }
                    },
                    {
                      "x": 12,
                      "y": 34,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_9"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Kubernetes Storage",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/3_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/3_1"
                      }
                    },
                    {
                      "x": 0,
                      "y": 8,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/3_2"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Network",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/4_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/4_1"
                      }
                    },
                    {
                      "x": 0,
                      "y": 8,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/4_2"
                      }
                    },
                    {
                      "x": 12,
                      "y": 8,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/4_3"
                      }
                    }
                  ]
                }
              }
            ],
            "variables": [
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "hidden": false
                  },
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "plugin": {
                    "kind": "DatasourceVariable",
                    "spec": {
                      "datasourcePluginKind": "prometheus"
                    }
                  },
                  "name": "datasource"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "hidden": false
                  },
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "sort": "alphabetical-asc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "cluster",
                      "matchers": [
                        "kube_node_info"
                      ]
                    }
                  },
                  "name": "cluster"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "hidden": false
                  },
                  "defaultValue": [
                    "cert-manager"
                  ],
                  "allowAllValue": true,
                  "allowMultiple": true,
                  "customAllValue": ".*",
                  "sort": "alphabetical-asc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "namespace",
                      "matchers": [
                        "kube_pod_info{cluster=\"$cluster\"}"
                      ]
                    }
                  },
                  "name": "namespace"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "hidden": false
                  },
                  "defaultValue": "30s",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "plugin": {
                    "kind": "StaticListVariable",
                    "spec": {
                      "values": [
                        "1s",
                        "15s",
                        "30s",
                        "1m",
                        "3m",
                        "5m"
                      ]
                    }
                  },
                  "name": "resolution"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "description": "Can be used to filter on a specific deployment, statefulset or deamonset (only relevant panels).",
                    "hidden": false
                  },
                  "defaultValue": [
                    "cert-manager-5fbb96f87c"
                  ],
                  "allowAllValue": true,
                  "allowMultiple": true,
                  "sort": "alphabetical-asc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "created_by_name",
                      "matchers": [
                        "kube_pod_info{namespace=~\"$namespace\", cluster=\"$cluster\"}"
                      ]
                    }
                  },
                  "name": "created_by"
                }
              }
            ],
            "duration": "1h",
            "refreshInterval": "0s"
          }
        }
      mdai-data-management.json: |-
        {
          "kind": "Dashboard",
          "metadata": {
            "name": "de978rcegwfswb",
            "createdAt": "2025-07-10T23:23:46.604864046Z",
            "updatedAt": "2025-07-10T23:23:46.604864046Z",
            "version": 0,
            "project": "mdai"
          },
          "spec": {
            "display": {
              "name": "MDAI Data Management"
            },
            "panels": {
              "0_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "MDAI Total by $groupByLabel",
                    "description": "Shows how many $groupByLabel monitored based on the current selected time interval."
                  },
                  "plugin": {
                    "kind": "StatChart",
                    "spec": {
                      "calculation": "last-number",
                      "metricLabel": "",
                      "thresholds": {
                        "defaultColor": "#9e57ae",
                        "steps": []
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "count(count by($groupByLabel) (rate($receiverMetric{data_type=\"$dataType\"}[$__rate_interval])))"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "MDAI I/O $dataType",
                    "description": "Total ingress and egress $dataType filtered through MDAI operator."
                  },
                  "plugin": {
                    "kind": "BarChart",
                    "spec": {
                      "calculation": "last",
                      "format": {
                        "unit": "bytes"
                      },
                      "mode": "value",
                      "sort": "desc"
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                            "seriesNameFormat": "Received by Bytes"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "query": "sum(sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                            "seriesNameFormat": "Sent by Bytes"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Average Percentage Difference I/O",
                    "description": "Average percentage difference between ingress and egress $dataType."
                  },
                  "plugin": {
                    "kind": "GaugeChart",
                    "spec": {
                      "calculation": "last",
                      "format": {
                        "unit": "percent"
                      },
                      "max": 100,
                      "thresholds": {
                        "steps": [
                          {
                            "color": "#6d3b78",
                            "value": 0
                          },
                          {
                            "color": "#eabef3",
                            "value": 0
                          },
                          {
                            "color": "#e288f6",
                            "value": 10
                          },
                          {
                            "color": "#be5ad4",
                            "value": 20
                          },
                          {
                            "color": "#9e4db0",
                            "value": 30
                          },
                          {
                            "color": "#8d33a0",
                            "value": 40
                          },
                          {
                            "color": "#6d3b78",
                            "value": 50
                          },
                          {
                            "color": "#61306b",
                            "value": 60
                          },
                          {
                            "color": "#572961",
                            "value": 70
                          },
                          {
                            "color": "#481254",
                            "value": 80
                          },
                          {
                            "color": "#2f0837",
                            "value": 90
                          }
                        ]
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "(\n  sum(increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n  -\n  sum(increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n)\n/\nsum(increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n* 100",
                            "seriesNameFormat": "Difference I/O"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "1_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "MDAI I/O by $groupByLabel",
                    "description": "Total number of $dataType and size per service based on time interval for ingress and egress."
                  },
                  "plugin": {
                    "kind": "Table",
                    "spec": {
                      "cellSettings": [],
                      "columnSettings": [
                        {
                          "header": "Services",
                          "hide": false,
                          "name": "service",
                          "enableSorting": true,
                          "sort": "desc"
                        },
                        {
                          "name": "timestamp",
                          "hide": true,
                          "header": "timestamp"
                        },
                        {
                          "name": "value #1",
                          "header": "Received"
                        },
                        {
                          "name": "value #2",
                          "header": "Receiver Bytes",
                          "format": {
                            "unit": "bytes"
                          }
                        },
                        {
                          "name": "value #3",
                          "header": "Sent"
                        },
                        {
                          "name": "value #4",
                          "header": "Sent Bytes",
                          "format": {
                            "unit": "bytes"
                          }
                        }
                      ],
                      "density": "standard",
                      "pagination": true,
                      "transforms": [
                        {
                          "kind": "MergeSeries",
                          "spec": {}
                        }
                      ]
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "label_replace(\n  sum by ($groupByLabel) (increase($receiverMetric{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",          \n  \"$groupByLabel\",\n  \"(.*)\"\n)",
                            "seriesNameFormat": ""
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "label_replace(\n  sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "label_replace(\n  sum by($groupByLabel) (increase($exporterMetric{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                          }
                        }
                      }
                    },
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "label_replace(\n  sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])),\n  \"service\",\n  \"$1\",\n  \"$groupByLabel\",\n  \"(.*)\"\n)"
                          }
                        }
                      }
                    }
                  ],
                  "links": []
                }
              },
              "1_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Top Talkers Recieved $dataType Totals",
                    "description": "Total number of $dataType from top talkers $groupByLabel ingested by MDAI"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "list",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.2,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 1.5,
                        "pointRadius": 3
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      },
                      "querySettings": []
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "topk(2, sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                            "seriesNameFormat": "{{$groupByLabel}}"
                          }
                        }
                      }
                    }
                  ],
                  "links": []
                }
              },
              "1_2": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Top Talkers Sent $dataType Totals",
                    "description": "Total number of $dataType from top talkers $groupByLabel sent to configured destinations"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "legend": {
                        "mode": "list",
                        "position": "right",
                        "values": []
                      },
                      "visual": {
                        "areaOpacity": 0.18,
                        "connectNulls": false,
                        "display": "line",
                        "lineWidth": 1
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "prometheus"
                            },
                            "query": "sum by($groupByLabel) (increase($exporterMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:]))\n  and on($groupByLabel)\ntopk(2, sum by($groupByLabel) (increase($receiverMetricByBytes{data_type=\"$dataType\"}[$__rate_interval:])))",
                            "seriesNameFormat": "{{$groupByLabel}}"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            },
            "layouts": [
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Totals for I/O $dataType",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 10,
                      "content": {
                        "$ref": "#/spec/panels/0_1"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 8,
                      "height": 10,
                      "content": {
                        "$ref": "#/spec/panels/0_2"
                      }
                    },
                    {
                      "x": 20,
                      "y": 0,
                      "width": 4,
                      "height": 10,
                      "content": {
                        "$ref": "#/spec/panels/0_0"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "$dataType",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 24,
                      "height": 11,
                      "content": {
                        "$ref": "#/spec/panels/1_0"
                      }
                    },
                    {
                      "x": 0,
                      "y": 11,
                      "width": 12,
                      "height": 16,
                      "content": {
                        "$ref": "#/spec/panels/1_1"
                      }
                    },
                    {
                      "x": 12,
                      "y": 11,
                      "width": 12,
                      "height": 16,
                      "content": {
                        "$ref": "#/spec/panels/1_2"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Active Filters",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": []
                }
              }
            ],
            "variables": [
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "name": "Receiver Metric",
                    "hidden": false
                  },
                  "defaultValue": "items_received_by_service_total",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "sort": "alphabetical-asc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "__name__",
                      "matchers": [
                        "{__name__=~\".+\", data_type!=\"\"}"
                      ]
                    }
                  },
                  "name": "receiverMetric"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "name": "Receiver Metric by Bytes",
                    "hidden": false
                  },
                  "defaultValue": "bytes_received_by_service_total",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "sort": "alphabetical-asc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "__name__",
                      "matchers": [
                        "{__name__=~\".+\", data_type!=\"\"}"
                      ]
                    }
                  },
                  "name": "receiverMetricByBytes"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "name": "Exporter Metric",
                    "hidden": false
                  },
                  "defaultValue": "items_sent_by_service_total",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "sort": "alphabetical-desc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "__name__",
                      "matchers": [
                        "{__name__=~\".+\", data_type!=\"\"}"
                      ]
                    }
                  },
                  "name": "exporterMetric"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "name": "Exporter Metric by Bytes",
                    "hidden": false
                  },
                  "defaultValue": "bytes_sent_by_service_total",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "sort": "alphabetical-desc",
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "__name__",
                      "matchers": [
                        "{__name__=~\".+\", data_type!=\"\"}"
                      ]
                    }
                  },
                  "name": "exporterMetricByBytes"
                }
              },
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "name": "Data Type",
                    "hidden": false
                  },
                  "defaultValue": "logs",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "plugin": {
                    "kind": "StaticListVariable",
                    "spec": {
                      "values": [
                        "logs",
                        "metrics",
                        "traces"
                      ]
                    }
                  },
                  "name": "dataType"
                }
              },
              {
                "kind": "TextVariable",
                "spec": {
                  "display": {
                    "name": "Group By Label",
                    "hidden": false
                  },
                  "value": "mdai_service",
                  "name": "groupByLabel"
                }
              }
            ],
            "duration": "30m",
            "refreshInterval": "0s",
            "datasources": {}
          }
        }
      mdai-use.json: |-
        {
          "kind": "Dashboard",
          "metadata": {
            "name": "mdai-use-dashboard-demo",
            "createdAt": "2025-07-11T17:30:01.038766257Z",
            "updatedAt": "2025-07-11T17:30:01.038766257Z",
            "version": 0,
            "project": "mdai"
          },
          "spec": {
            "display": {
              "name": "MDAI USE dashboard"
            },
            "panels": {
              "0_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "CPU Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "percent-decimal"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"gateway-collector.*\", container=\"otc-container\"}[$__rate_interval])\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "0_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Memory Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"gateway-collector.*\", container=\"otc-container\"}\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "1_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "CPU Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "percent-decimal"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"mdai-operator-controller-manager.*\", container=\"manager\"}[$__rate_interval])\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "1_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Memory Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"mdai-operator-controller-manager.*\", container=\"manager\"}\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "CPU Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "percent-decimal"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"opentelemetry-operator.*\", container=\"manager\"}[$__rate_interval])\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "2_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Memory Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"opentelemetry-operator.*\", container=\"manager\"}\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "3_0": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "CPU Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "percent-decimal"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=~\"prometheus-mdai-kube-prometheus-stack-prometheus.*\", container=\"prometheus\"}[$__rate_interval])\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "3_1": {
                "kind": "Panel",
                "spec": {
                  "display": {
                    "name": "Memory Usage"
                  },
                  "plugin": {
                    "kind": "TimeSeriesChart",
                    "spec": {
                      "visual": {
                        "areaOpacity": 0,
                        "lineWidth": 2
                      },
                      "yAxis": {
                        "format": {
                          "unit": "bytes"
                        },
                        "min": 0
                      }
                    }
                  },
                  "queries": [
                    {
                      "kind": "TimeSeriesQuery",
                      "spec": {
                        "plugin": {
                          "kind": "PrometheusTimeSeriesQuery",
                          "spec": {
                            "datasource": {
                              "kind": "PrometheusDatasource",
                              "name": "Prometheus"
                            },
                            "query": "container_memory_working_set_bytes{namespace=\"$namespace\",pod=~\"prometheus-mdai-kube-prometheus-stack-prometheus.*\", container=\"prometheus\"}\n",
                            "seriesNameFormat": "{{pod}}"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            },
            "layouts": [
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Collector",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/0_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/0_1"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "MDAI Operator",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/1_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/1_1"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Otel Operator",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/2_1"
                      }
                    }
                  ]
                }
              },
              {
                "kind": "Grid",
                "spec": {
                  "display": {
                    "title": "Prometheus",
                    "collapse": {
                      "open": true
                    }
                  },
                  "items": [
                    {
                      "x": 0,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/3_0"
                      }
                    },
                    {
                      "x": 12,
                      "y": 0,
                      "width": 12,
                      "height": 8,
                      "content": {
                        "$ref": "#/spec/panels/3_1"
                      }
                    }
                  ]
                }
              }
            ],
            "variables": [
              {
                "kind": "ListVariable",
                "spec": {
                  "display": {
                    "hidden": false
                  },
                  "defaultValue": "mdai",
                  "allowAllValue": false,
                  "allowMultiple": false,
                  "plugin": {
                    "kind": "PrometheusLabelValuesVariable",
                    "spec": {
                      "labelName": "namespace",
                      "matchers": []
                    }
                  },
                  "name": "namespace"
                }
              }
            ],
            "duration": "1h",
            "refreshInterval": "0s"
          }
        }